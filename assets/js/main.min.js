"use strict";function initMobileMenu(){var e=$(".menu-main-wrapper .menu").length?$(".menu-main-wrapper .menu"):$(".menu-main-dropdown .menu"),i=$(".mobile-menu");i.append(e.clone());var t=i.find(".menu-item-has-children > a");t.each(function(){var e='<button class="open-sub"><i class="dripicons-chevron-down"></i></button>';$(this).append(e)}),i.find(".open-sub").on("click",function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).parent().next().slideToggle()});var a=$(".mobile-menu-wrap .menu-user-wrap"),n=$(".mobile-menu-wrap .menu-user-avatar");n.on("click",function(){a.slideToggle(200)})}function initMegaMenu(){function e(){t(this)}function i(){a(this)}function t(e){var i=$(e).find(">.sub-menu"),t=i.innerWidth(),a=i.innerHeight(),s=$('<div class="hover-area"></div>'),r={paddingBottom:void 0!==$(e).data("pb")&&""!==$(e).data("pb")?parseInt($(e).data("pb")):0,paddingRight:void 0!==$(e).data("pr")&&""!==$(e).data("pr")?parseInt($(e).data("pr")):0,background:$(e).data("bg")};clearTimeout(n),o.addClass("mega-open"),p.css({backgroundImage:"url("+r.background+")",opacity:0}),o.css({width:d+t+r.paddingRight,height:a+40>l?a+40+r.paddingBottom:l+r.paddingBottom}),o.on("transitionend",function(){p.css("opacity",1)}),$(e).append(s),isRTL?$(e).find(".hover-area").css({right:d,top:-20,width:t+r.paddingRight,height:a+40>l?a+40+r.paddingBottom:l+r.paddingBottom}):$(e).find(".hover-area").css({left:d,top:-20,width:t+r.paddingRight,height:a+40>l?a+40+r.paddingBottom:l+r.paddingBottom}),$(e).addClass("sub-open"),c.addClass("sub-open")}function a(e){$(e).removeClass("sub-open"),o.css({height:l}),n=setTimeout(function(){o.css({width:d})},60),o.removeClass("mega-open"),c.removeClass("sub-open"),p.css("opacity",0),$(e).find(".hover-area").remove()}var n,o=$(".menu-main-wrapper"),s=o.find(".menu"),r=s.find(" > .mega-menu"),d=o.innerWidth(),l=o.innerHeight(),c=$(".menu-main-background"),u=$(".menu-main-overlay"),p=$(".sub-bg-container");c.width(d),isRTL?p.css("right",d+2):p.css("left",d+2),$(".hdr-widget--menu-main .menu-main-toggle").on("click",function(e){e.preventDefault(),$(this).hasClass("is-active")?($(this).removeClass("is-active"),o.removeClass("is-active"),u.removeClass("is-active")):($(this).addClass("is-active"),o.addClass("is-active"),u.addClass("is-active")),$(".mobile-menu-wrap").slideToggle()}),u.on("click",function(){u.removeClass("is-active"),$(".menu-main-toggle").removeClass("is-active"),o.removeClass("is-active")}),$(".hdr-widget--menu-main.open-onhover").hoverIntent(function(){var e=$(this).find(".menu-main-toggle");e.hasClass("is-active")||window.innerWidth>991&&(e.addClass("is-active"),o.addClass("is-active"),u.addClass("is-active"))},function(){$(this).find(".menu-main-toggle").removeClass("is-active"),o.removeClass("is-active"),u.removeClass("is-active")}),r.hover(e,i)}function authorIndexFilter(){var e=$(".author-index"),i=$(".browse-author-by-alphabet a");e.isotope({filter:"*",layoutMode:"fitRows",animationOptions:{duration:750,easing:"linear",queue:!1}}),i.click(function(t){var a=$(this).data("filter");return i.removeClass("current"),$(this).addClass("current"),e.isotope({filter:a}),t.preventDefault(),!1})}function initHeroCarousel(){var e=$(".hero-carousel-wrap"),i=e.data("style"),t=parseInt(e.data("duration")),a=e.data("fade"),n=$(".hero-carousel");switch(i){case"style-2":n.slick({lazyload:"ondemand",slidesToShow:1,infinite:!0,dots:!0,arrows:!0,autoplay:!0,prevArrow:'<button type="button" class="slick-prev"><i class="dripicons-chevron-left"></i></button>',nextArrow:'<button type="button" class="slick-next"><i class="dripicons-chevron-right"></i></button>',fade:a,autoplaySpeed:t});break;default:n.slick({lazyload:"ondemand",slidesToShow:1,centerPadding:"400px",centerMode:!0,infinite:!0,dots:!1,arrows:!1,autoplay:!0,autoplaySpeed:t,responsive:[{breakpoint:1700,settings:{centerPadding:"300px"}},{breakpoint:1600,settings:{centerPadding:"200px"}},{breakpoint:1300,settings:{centerPadding:"150px"}},{breakpoint:1024,settings:{centerPadding:"0"}}]})}}function initLookInside(){var e=$(".tokoo-look-inside"),i=e.find(".preview-zoom-in"),t=e.find(".preview-zoom-out"),a=e.find(".book-pages"),n=e.find(".look-inside-box"),o=e.find(".toggle-detail-tab"),s=e.find(".toggle-related-tab");$(".look-inside__close").on("click",function(){e.fadeOut()}),o.on("click",function(){n.toggleClass("tab-detail-active")}),s.on("click",function(){n.toggleClass("tab-related-active")}),i.on("click",function(e){e.preventDefault(),console.log("zoom in"),a.innerWidth()>1200||a.css({width:a.innerWidth()+100})}),t.on("click",function(e){e.preventDefault(),console.log("zoom out"),a.innerWidth()<600||a.css({width:a.innerWidth()-100})})}function initProductSearch(){var e=$(".product-search-input input");e.on("keyup",function(){""!==$(this).val()?$(this).addClass("dirty"):$(this).removeClass("dirty")})}function initTextGradient(e,i){$(".text-gradient").each(function(){var t=$(this),a=t.text().split(""),n=generateColor(e,i,a.length);t.empty(),$.each(a,function(e,i){t.append($('<span style="color:#'+n[e]+'">').text(i))})})}function initMasonryLayout(){$(".post-masonry").isotope({layoutMode:"masonry"}),$("html").hasClass("no-flexbox")&&$(".post-grid").isotope({layoutMode:"masonry"})}function initGoodies(){var e=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerHook:0,triggerElement:".site-header",duration:"100%"}).setTween(TweenMax.to(".page-header-bg .bg",1,{y:"50%"})).addTo(e),new ScrollMagic.Scene({triggerHook:.4,triggerElement:".post__image",duration:"200%"}).setTween(TweenMax.to(".post__image .bg",1,{y:"50%"})).addTo(e);$(".post__share a").on("mouseenter",function(){$(this).addClass("animated").on("animationend",function(){$(this).removeClass("animated")})}),$(".see-back").on("click",function(){$(this).parents(".book-images").find(".book").toggleClass("back-view")})}function initMap(){$(".tokoo-map").each(function(){var e=$(this),i=parseFloat(e.data("lat")),t=parseFloat(e.data("lon")),a=e.data("marker-image"),n=e.siblings(".map-style").length?JSON.parse(e.siblings(".map-style").html()):[],o=parseInt(e.data("height")),s=e.data("title"),r=e.data("content"),d=e.data("zoom")?e.data("zoom"):13;e.height(o),e.gmap3({map:{options:{center:[i,t],zoom:d,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,navigationControl:!0,scrollwheel:!1,streetViewControl:!1,styles:n}},marker:{latLng:[i,t],data:"<div class='tokoo-info-window'><h2>"+s+"</h2>"+r+"</div>",options:{icon:a},events:{click:function(e,i,t){var a=$(this).gmap3("get"),n=$(this).gmap3({get:{name:"infowindow"}});console.log(n),n?(n.open(a,e),n.setContent(t.data)):$(this).gmap3({infowindow:{anchor:e,options:{content:t.data}}})}}}})})}function initSocialShare(){$(".post__share").each(function(){var e=$(this).data("title"),i=$(this).data("text"),t=$(this).data("image"),a=$(this).data("url"),n=$(this).data("width"),o=$(this).data("height");$(this).find("a").ShareLink({title:e,text:i,image:t,url:a,width:n,height:o})})}function initFlexSlider(){$(".gallery-slider,.koo-image-slider").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,prevText:'<i class="dripicons-chevron-left"></i>',nextText:'<i class="dripicons-chevron-right"></i>'})}function initCountdown(){$(".product-date-count-down").each(function(){var e=$(this).data("date");$(this).countdown(e,function(e){$(this).html(e.strftime('<div class="count-num"><span class="timer">%D</span><span class="label">'+pustaka_translate.days+'</span></div> <div class="count-num"><span class="timer">%H</span><span class="label">'+pustaka_translate.hr+'</span></div> <div class="count-num"><span class="timer">%M</span><span class="label">'+pustaka_translate.min+'</span></div> <div class="count-num"><span class="timer">%S</span><span class="label">'+pustaka_translate.sec+"</span></div>"))})})}function tokooAudioPlaylist(){var e=$(".music-cover-wrap"),i=(e.find(".play"),$(".product-overview").find("audio")[0]);e.length&&($(document).on("click",".music-cover .play",function(){i.paused?(i.play(),e.find(".music-cover").addClass("is-playing")):(i.pause(),e.find(".music-cover").removeClass("is-playing"))}),i.addEventListener("play",function(){e.find(".music-cover").addClass("is-playing")},!1),i.addEventListener("pause",function(){e.find(".music-cover").removeClass("is-playing")},!1))}function dealNavTab(){var e=$(".deal-tab-grid");e.on("click",".deal-tab-nav a",function(i){i.preventDefault();var t=$(this).attr("href");$(this).parent().siblings().removeClass("active"),$(this).parent().addClass("active"),e.find(".deal-tab-pane").removeClass("active"),$(t).addClass("active")})}function initStickyHeader(){var e=$(".site-header-wrap"),i=e.find(".site-header").innerHeight();e.hasClass("is-sticky")&&e.css({height:i+"px"})}$=jQuery;var isRTL=$("body").hasClass("rtl");SmoothScroll({stepSize:55});var pustaka=pustaka_js_var;$(document).ready(function(){initStickyHeader(),initMobileMenu(),initHeroCarousel(),$("body").hasClass("rtl")||initTextGradient(pustaka.accent_color_1,pustaka.accent_color_2),initProductSearch(),initMasonryLayout(),initGoodies(),initMap(),initSocialShare(),initLookInside(),initCountdown(),dealNavTab();new LazyLoad({data_src:"original",class_loaded:"lazy-loaded",threshold:400});$(".see-gallery").hover(function(){$(".movie-case").addClass("is-open")},function(){$(".movie-case").removeClass("is-open")}),$(".see-inside").on("click",function(e){e.preventDefault(),$(".tokoo-look-inside").fadeIn()}),$(".venobox").venobox(),$(".open-login-popup").on("click",function(e){return!$("body").hasClass("woocommerce-account")&&($(".user-auth-box").fadeIn(),void e.preventDefault())}),$(".user-auth-box .woocommerce-error").length&&$(".open-login-popup").trigger("click"),$(".user-auth-box .tokoo-popup__close").on("click",function(){$(this).parents(".tokoo-popup").fadeOut()}),$(".author-area").stick_in_parent().on("sticky_kit:bottom",function(e){$(this).parent().css("position","static")}).on("sticky_kit:unbottom",function(e){$(this).parent().css("position","relative")}),$(".hdr-widget--menu-cart").on("click",function(e){e.stopPropagation(),$(".mobile-menu-wrap").is(":visible")&&($(".mobile-menu-wrap").hide(),$(".menu-main-overlay").removeClass("is-active"),$(".menu-main-toggle").removeClass("is-active"))})}),$(window).resize(function(){initStickyHeader()}),$(window).load(function(){initMegaMenu(),initMasonryLayout(),initFlexSlider(),authorIndexFilter(),tokooAudioPlaylist(),initStickyHeader()});